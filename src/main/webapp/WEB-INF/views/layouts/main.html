<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title th:text="|${title} - #{project.name}|">Main</title>
    <meta name="description" content=""/>
    <meta name="author" content="Erland Green"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="apple-mobile-web-app-title" content="RSVP"/>
    <link rel="shortcut icon" href="../../../resources/img/favicon.png" th:href="@{/resources/img/favicon.png}" />

    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon" sizes="144x144" href="../../../resources/img/apple-touch-icon-144x144.png" th:href="@{/resources/img/apple-touch-icon-144x144.png}" />

    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon" sizes="114x114" href="../../../resources/img/apple-touch-icon-114x114.png" th:href="@{/resources/img/apple-touch-icon-114x114.png}" />

    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon" sizes="72x72" href="../../../resources/img/apple-touch-icon-72x72.png" th:href="@{/resources/img/apple-touch-icon-72x72.png}" />

    <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
    <link rel="apple-touch-icon" href="../../../resources/img/apple-touch-icon.png" th:href="@{/resources/img/apple-touch-icon.png}" />


    <!--  HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" href="../../../resources/css/jquery-ui-1.10.4.custom.min.css" th:href="@{/resources/css/jquery-ui-1.10.4.custom.min.css}" />
    <link rel="stylesheet" href="../../../resources/css/bootstrap.min.css" th:href="@{/resources/css/bootstrap.min.css}" />
    <link rel="stylesheet" href="../../../resources/css/bootstrap-theme.min.css" th:href="@{/resources/css/bootstrap-theme.min.css}" />
    <link rel="stylesheet" href="../../../resources/css/font-awesome.min.css" th:href="@{/resources/css/font-awesome.min.css}" />
    <link rel="stylesheet" href="../../../resources/css/main.css" th:href="@{/resources/css/main.css}" />
    <style>
            body {
                background: url('/hyperion/resources/img/bg<th:block th:text="${#objects.nullSafe(session.BACKGROUND_ID,0) + 1}">1</th:block>.jpg') #333 no-repeat center center fixed;
            }
        </style>
  </head>
  <body>

    <header class="navbar navbar-inverse navbar-fixed-top" role="banner" th:fragement="navigation(activeMenu)">
      <div class="container" style="...">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#" th:href="@{/}" style="..."><img src="../../../resources/img/logo2.png" th:src="@{/resources/img/logo2.png}" alt="RSVP.com" style="..."/></a>
        </div>
        <form action="#" th:action="@{/logout}" method="Post" id="logoutForm">
          <nav class="collapse navbar-collapse" role="navigation">
            <ul class="nav navbar-nav navbar-right">
              <li th:if="${#authorization.expression('hasRole(''ROLE_USER'')')}">
                <a href="#" th:if="${#strings.isEmpty(session.imageUrl)}" th:text="${#authentication.name}">Test</a>
                <a href="#" th:unless="${#strings.isEmpty(session.imageUrl)}" style="..."><img src="#" th:src="${session.imageUrl}" alt="user" th:alt="${#authentication.name}" style="..."/></a>
              </li>
              <li th:class="${activeMenu} == 'profile' ? 'active'" th:if="${#authorization.expression('hasRole(''ROLE_USER'')')}"><a href="#" th:href="@{/profile}" th:text="#{profile.label}">Pofile</a></li>
              <li th:class="${activeMenu} == 'login' ? 'active'" th:unless="${#authorization.expression('hasRole(''ROLE_USER'')')"><a href="#" th:href="@{/login}">Login</a></li>
              <li th:class="${activeMenu} == 'signUp' ? 'active'" th:ulenss="${#authorization.expression('hasRole(''ROLE_USER'')')}" id="signUp-li"><a href="#" th:href="@{/user/register}"><strong>Sign Up</strong></a></li>
              <li th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')')}"><a href="#" th:href="@{/event}" th:text="#{event.list.label}">Event</a></li>
              <li th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')')}"><a href="#" th:href="@{/admin}">Admin</a></li>
              <li th:if="${#authorization.expression('hasRole(''ROLE_USER'')')}"><a id="logoutLink" href="#" th:href="@{/logout}">Logout</a></li>
            </ul>
          </nav>
        </form>
      </div>
    </header>

    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <h1 th:text="#{welcome.label}">Welcome</h1>
        </div>
      </div>
    </div>

  <footer role="contentinfo" th:fragment="footer">
    <div class="container">
      <div class="row">
        <div class="col-sm-12 text-right">
          <p><span th:text="${#dates.format(#dates.createNow(), 'yyyy')}">2023</span>Erland Green</p>
        </div>
      </div>
    </div>
  </footer>

  <div id="preload" class="hidden">
    <img src="../../../resources/img/bg1.jpg" th:src="@{/resources/img/bg1.jpg}" alt="" />
    <img src="../../../resources/img/bg2.jpg" th:src="@{/resources/img/bg2.jpg}" alt="" />
    <img src="../../../resources/img/bg3.jpg" th:src="@{/resources/img/bg3.jpg}" alt="" />
    <img src="../../../resources/img/bg4.jpg" th:src="@{/resources/img/bg4.jpg}" alt="" />
    <img src="../../../resources/img/bg5.jpg" th:src="@{/resources/img/bg5.jpg}" alt="" />
    <img src="../../../resources/img/bg6.jpg" th:src="@{/resources/img/bg6.jpg}" alt="" />
  </div>
  <div th:fragment="scripts" th:remove="tag">
    <script src="../../../resources/js/jquery-1.11.0.min.js" th:src="@{/resources/js/jquery-1.11.0.min.js}"></script>
    <script src="../../../resources/js/jquery-migrate-1.2.1.min.js" th:src="@{/resources/js/jquery-migrate-1.2.1.min.js}"></script>
    <script src="../../../resources/js/jquery-ui-1.10.4.custom.min.js" th:src="@{/resources/js/jquery-ui-1.10.4.custom.min.js}"></script>
    <script src="../../../resources/js/bootstrap.min.js" th:src="@{/resources/js/bootstrap.min.js}"></script>
    <script src="../../../resources/js/main.js" th:src="@{/resources/js/main.js}"></script>
    <script type="text/javascript" th:inline="javascript">
        var imgFolder = /*[[@{/resources/img}]]*/ '';
                var backgroundUrl = /*[[@{/currentBackground}]]*/ '';
                var csrf = '';
                var current = /*[[${session.BACKGROUND_ID}]]*/ 0;

                var body = $('body');
                var backgrounds = new Array(
                    'url('+imgFolder+'/bg1.jpg) #333 no-repeat center center fixed',
                    'url('+imgFolder+'/bg2.jpg) #333 no-repeat center center fixed',
                    'url('+imgFolder+'/bg3.jpg) #333 no-repeat center center fixed',
                    'url('+imgFolder+'/bg4.jpg) #333 no-repeat center center fixed',
                    'url('+imgFolder+'/bg5.jpg) #333 no-repeat center center fixed',
                    'url('+imgFolder+'/bg6.jpg) #333 no-repeat center center fixed'
                );

                function nextBackground() {
                    body.css(
                        'background',
                        backgrounds[current = ++current % backgrounds.length]
                    );
                    $.ajax({
                        url: backgroundUrl,
                        type: 'POST',
                        data: {backgroundId: current, '_csrf': csrf}
                    });
                    setTimeout(nextBackground, 10000);
                }

                $(function() {
                    setTimeout(nextBackground, 10000);
                });
    </script>
    <script th:if="${#authorization.expression('hasRole(''ROLE_USER'')')}">
      $(function() {
        $('a#logoutLink').click(function(e) {
          e.preventDefault();
          $('#logoutForm').submit();
        });
      });
    </script>
  </div>
  </body>
</html>